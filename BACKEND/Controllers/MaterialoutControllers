// Importing Materialout Model
const Materialout = require("../Model/MaterialoutModel");

// Retrieve all materialouts
const getAllMaterialouts = async (req, res, next) => {
    let materialouts;
    try {
        materialouts = await Materialout.find();
    } catch (err) {
        console.log(err);
    }
    // If no materialouts found
    if (!materialouts) {
        return res.status(404).json({ Message: "Materialout not found!" });
    }
    // Display all materialouts
    return res.status(200).json({ materialouts });
};

// Add new materialouts
const addMaterialouts = async (req, res, next) => {
    const { materialoutID, JobId, date, gold, silver, pladium, platinum, thairuby, burmeseruby, bluesapphire, purplesapphire, starsapphire, whitesapphire, blooddiamond, pinkstardiamond, regentdiamond, colombianaquamarine, madagascaraquamarine, description } = req.body;
    let materialouts;
    try {
        materialouts = new Materialout({ materialoutID, JobId, date, gold, silver, pladium, platinum, thairuby, burmeseruby, bluesapphire, purplesapphire, starsapphire, whitesapphire, blooddiamond, pinkstardiamond, regentdiamond, colombianaquamarine, madagascaraquamarine, description });
        await materialouts.save();
    } catch (err) {
        console.log(err);
    }
    // If unable to add materialouts
    if (!materialouts) {
        return res.status(404).json({ message: "Unable to add materialouts" });
    }
    return res.status(200).json({ materialouts });
};

// Retrieve materialout by ID
const getById = async (req, res, next) => {
    const id = req.params.id;
    let materialout;
    try {
        materialout = await Materialout.findById(id);
    } catch (err) {
        console.log(err);
    }
    // If materialout not found
    if (!materialout) {
        return res.status(404).json({ message: "Materialout not found" });
    }
    return res.status(200).json({ materialout });
};

// Update materialout details
const updateMaterialout = async (req, res, next) => {
    const id = req.params.id;
    const { materialoutID, JobId, date, gold, silver, pladium, platinum, thairuby, burmeseruby, bluesapphire, purplesapphire, starsapphire, whitesapphire, blooddiamond, pinkstardiamond, regentdiamond, colombianaquamarine, madagascaraquamarine, description } = req.body;
    let materialouts;
    try {
        materialouts = await Materialout.findByIdAndUpdate(id, { materialoutID, JobId, date, gold, silver, pladium, platinum, thairuby, burmeseruby, bluesapphire, purplesapphire, starsapphire, whitesapphire, blooddiamond, pinkstardiamond, regentdiamond, colombianaquamarine, madagascaraquamarine, description });
        materialouts = await materialouts.save();
    } catch (err) {
        console.log(err);
    }
    // If unable to update materialout
    if (!materialouts) {
        return res.status(404).json({ message: "Unable to update materialout details" });
    }
    return res.status(200).json({ materialouts });
};

// Delete materialout details
const deleteMaterialout = async (req, res, next) => {
    const id = req.params.id;
    let materialout;
    try {
        materialout = await Materialout.findByIdAndDelete(id);
    } catch (err) {
        console.log(err);
    }
    // If unable to delete materialout
    if (!materialout) {
        return res.status(404).json({ message: "Unable to delete materialout details" });
    }
    return res.status(200).json({ materialout });
};

// Export functions
exports.addMaterialouts = addMaterialouts;
exports.getAllMaterialouts = getAllMaterialouts;
exports.getById = getById;
exports.updateMaterialout = updateMaterialout;
exports.deleteMaterialout = deleteMaterialout;
